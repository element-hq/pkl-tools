//
// Copyright 2025 New Vector Ltd.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

amends "pkl:test"

import "../StaticCode.pkl"

import "../examples/StandardTypes.pkl"
import "../examples/Basic.pkl"
import "../examples/MultipleInstances.pkl"
import "../examples/NullableProperties.pkl"
import "../examples/Modules.pkl"

examples {
  ["Standard Types: Swift"] {
    StandardTypes.output.text
  }
  ["Standard Types: Kotlin"] {
    (StandardTypes) { output { renderer = makeKotlinRenderer("StandardTypes") } }.output.text
  }

  ["Basic: Swift"] {
    Basic.output.text
  }
  ["Basic: Kotlin"] {
    (Basic) { output { renderer = makeKotlinRenderer("User") } }.output.text
  }

  ["Multiple Instances: Swift"] {
    MultipleInstances.output.text
  }
  ["Multiple Instances: Kotlin"] {
    (MultipleInstances) { output { renderer = makeKotlinRenderer("Equipment") } }.output.text
  }

  ["Nullable Properties: Swift"] {
    NullableProperties.output.text
  }
  ["Nullable Properties: Kotlin"] {
    (NullableProperties) { output { renderer = makeKotlinRenderer("NullableProperties") } }.output.text
  }

  ["Modules: Swift"] {
    Modules.output.text
  }
  ["Modules: Kotlin"] {
    (Modules) { output { renderer = makeKotlinRenderer("People") } }.output.text
  }
}

local function makeKotlinRenderer(_objectName: String) =
  new StaticCode.Renderer {
    language = "Kotlin"
    packageName = "my.package"
    objectName = _objectName
  }